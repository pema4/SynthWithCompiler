volume = 1;
coeff = 0.9999;
wasPlaying = false;
while (true)
{
    if (IsPlaying)
        volume = volume * coeff + (1 - coeff);
    elsew
        volume *= coeff;
       
    yield volume;
    pause 1;  
}